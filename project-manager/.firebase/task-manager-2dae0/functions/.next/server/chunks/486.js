exports.id=486,exports.ids=[486],exports.modules={7950:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(60687),r=a(90687);function n({children:e}){return(0,s.jsx)(r.H,{children:e})}},15616:(e,t,a)=>{"use strict";a.d(t,{T:()=>n});var s=a(60687);a(43210);var r=a(96241);function n({className:e,...t}){return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}},21328:(e,t,a)=>{"use strict";a.d(t,{m:()=>b});var s=a(60687),r=a(27605),n=a(63442),o=a(9275),l=a(80043),d=a(75535),i=a(24934),c=a(68988),u=a(39390),m=a(15616),x=a(63772),g=a(79184),p=a(85650);let{db:h}=(0,l.M)(),f=o.Ik({title:o.Yj().min(1,"Title is required"),assignedTo:o.Yj().optional(),dueDate:o.Yj().optional(),remark:o.Yj().optional()}),b=({boardId:e,taskId:t,onSubtaskCreated:a,onClose:o,boardMembers:l,boardStatuses:b})=>{let{register:j,handleSubmit:v,control:w,formState:{errors:y,isSubmitting:N}}=(0,r.mN)({resolver:(0,n.u)(f)}),{user:k}=(0,x.A)(),z=async s=>{if(!k)return;let r={title:s.title,status:b[0]?.id||"todo",createdAt:(0,d.O5)(),boardId:e};if(s.assignedTo&&(r.assignedTo=s.assignedTo),s.dueDate){let e=new Date(s.dueDate);r.dueDate=d.Dc.fromDate(e)}s.remark&&(r.remark=s.remark);let n=(0,d.H9)(h,"boards",e,"tasks",t);await (0,d.gS)((0,d.rJ)(n,"subtasks"),r),a(),o()};return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/50 to-purple-50/50 rounded-xl -z-10"}),(0,s.jsxs)("form",{onSubmit:v(z),className:"space-y-6 p-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{htmlFor:"title",className:"text-sm font-medium text-gray-700",children:"Subtask Title *"}),(0,s.jsx)(c.p,{id:"title",...j("title"),placeholder:"Enter subtask title","aria-invalid":y.title?"true":"false",className:"backdrop-blur-sm bg-white/80 border-white/20 focus:border-blue-300 focus:ring-2 focus:ring-blue-200/50 transition-all duration-200"}),y.title&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:y.title.message})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{htmlFor:"dueDate",className:"text-sm font-medium text-gray-700",children:"Due Date"}),(0,s.jsx)(c.p,{id:"dueDate",type:"date",...j("dueDate"),min:(0,p.GP)(new Date,"yyyy-MM-dd"),className:"backdrop-blur-sm bg-white/80 border-white/20 focus:border-blue-300 focus:ring-2 focus:ring-blue-200/50 transition-all duration-200"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{htmlFor:"assignedTo",className:"text-sm font-medium text-gray-700",children:"Assigned To"}),(0,s.jsx)(r.xI,{name:"assignedTo",control:w,render:({field:e})=>(0,s.jsx)(g._,{selectedMemberId:e.value,boardMembers:l,onSelect:e.onChange,placeholder:"Assign subtask to member"})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{htmlFor:"remark",className:"text-sm font-medium text-gray-700",children:"Remark / Notes"}),(0,s.jsx)(m.T,{id:"remark",...j("remark"),placeholder:"Add any additional notes or comments...",rows:3,className:"backdrop-blur-sm bg-white/80 border-white/20 focus:border-blue-300 focus:ring-2 focus:ring-blue-200/50 transition-all duration-200 min-h-[80px] resize-none"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,s.jsx)(i.$,{type:"button",variant:"outline",onClick:o,className:"backdrop-blur-sm bg-white/50 border-white/20 hover:bg-white/70 transition-all duration-200",children:"Cancel"}),(0,s.jsx)(i.$,{type:"submit",disabled:N,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Creating...":"Create Subtask"})]})]})]})}},28872:(e,t,a)=>{"use strict";a.d(t,{K:()=>n});var s=a(60687),r=a(95033);let n=({open:e,onOpenChange:t,onConfirm:a,title:n,description:o})=>(0,s.jsx)(r.Lt,{open:e,onOpenChange:t,children:(0,s.jsxs)(r.EO,{children:[(0,s.jsxs)(r.wd,{children:[(0,s.jsx)(r.r7,{children:n}),(0,s.jsx)(r.$v,{children:o})]}),(0,s.jsxs)(r.ck,{children:[(0,s.jsx)(r.Zr,{children:"Cancel"}),(0,s.jsx)(r.Rx,{onClick:a,children:"Confirm"})]})]})})},28997:(e,t,a)=>{Promise.resolve().then(a.bind(a,46840))},33135:(e,t,a)=>{"use strict";a.d(t,{AM:()=>o,Wv:()=>l,hl:()=>d});var s=a(60687);a(43210);var r=a(40599),n=a(96241);function o({...e}){return(0,s.jsx)(r.bL,{"data-slot":"popover",...e})}function l({...e}){return(0,s.jsx)(r.l9,{"data-slot":"popover-trigger",...e})}function d({className:e,align:t="center",sideOffset:a=4,...o}){return(0,s.jsx)(r.ZL,{children:(0,s.jsx)(r.UC,{"data-slot":"popover-content",align:t,sideOffset:a,className:(0,n.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...o})})}},37546:(e,t,a)=>{"use strict";a.d(t,{g:()=>D});var s=a(60687),r=a(63442),n=a(27605),o=a(9275),l=a(24934),d=a(58164),i=a(68988),c=a(15616),u=a(33135),m=a(56924),x=a(63974),g=a(75034),p=a(40228),h=a(41862),f=a(8819),b=a(85650),j=a(96241),v=a(75535),w=a(80043),y=a(43210),N=a(52581),k=a(79184);let{db:z}=(0,w.M)(),C=o.z.object({title:o.z.string().min(1,"Title is required"),description:o.z.string().optional(),status:o.z.string(),dueDate:o.z.date().optional(),assignedTo:o.z.string().optional(),remark:o.z.string().optional()});function D({boardId:e,task:t,boardMembers:a,boardStatuses:o,onTaskUpdated:w,onClose:D}){let[_,T]=(0,y.useState)(!1),A=(0,n.mN)({resolver:(0,r.u)(C),defaultValues:{title:t.title,description:t.description||"",status:t.status,dueDate:t.dueDate?t.dueDate.toDate():void 0,assignedTo:t.assignedTo||void 0,remark:t.remark||""}}),S=async a=>{if(T(!0),"done"===a.status)try{let a=(0,v.P)((0,v.rJ)(z,"boards",e,"tasks",t.id,"subtasks"));if((await (0,v.GG)(a)).docs.map(e=>e.data()).filter(e=>"done"!==e.status).length>0){N.oR.error("Cannot mark task as done.",{description:"All subtasks must be completed first."}),T(!1);return}}catch(e){console.error("Error fetching subtasks for validation:",e),N.oR.error("Failed to validate subtask status. Please try again."),T(!1);return}try{let s=(0,v.H9)(z,"boards",e,"tasks",t.id);await (0,v.mZ)(s,{...a,dueDate:a.dueDate?v.Dc.fromDate(a.dueDate):null,assignedTo:a.assignedTo||null,remark:a.remark||""}),w()}catch(e){console.error("Error updating task: ",e),N.oR.error("Failed to update the task. Please try again.")}finally{T(!1)}};return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/50 to-purple-50/50 rounded-xl -z-10"}),(0,s.jsx)(d.lV,{...A,children:(0,s.jsxs)("form",{onSubmit:A.handleSubmit(S),className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center shadow-lg",children:(0,s.jsx)(g.A,{className:"w-4 h-4 text-white"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Edit Task"})]}),(0,s.jsx)(d.zB,{control:A.control,name:"title",render:({field:e})=>(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{className:"text-sm font-medium text-gray-700",children:"Title"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(i.p,{placeholder:"e.g. Implement feature",...e,className:"backdrop-blur-sm bg-white/80 border-white/20 focus:border-blue-300 focus:ring-2 focus:ring-blue-200/50 transition-all duration-200"})}),(0,s.jsx)(d.C5,{})]})}),(0,s.jsx)(d.zB,{control:A.control,name:"description",render:({field:e})=>(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{className:"text-sm font-medium text-gray-700",children:"Description"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.T,{placeholder:"Add a more detailed description...",className:"resize-none backdrop-blur-sm bg-white/80 border-white/20 focus:border-blue-300 focus:ring-2 focus:ring-blue-200/50 transition-all duration-200 min-h-[80px]",...e})}),(0,s.jsx)(d.C5,{})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(d.zB,{control:A.control,name:"status",render:({field:e})=>(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{className:"text-sm font-medium text-gray-700",children:"Status"}),(0,s.jsxs)(x.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,s.jsx)(d.MJ,{children:(0,s.jsx)(x.bq,{className:"backdrop-blur-sm bg-white/80 border-white/20 focus:border-blue-300 focus:ring-2 focus:ring-blue-200/50 transition-all duration-200",children:(0,s.jsx)(x.yv,{placeholder:"Select a status"})})}),(0,s.jsx)(x.gC,{className:"backdrop-blur-sm bg-white/95 border-white/20",children:o.map(e=>(0,s.jsx)(x.eb,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:`w-2 h-2 rounded-full bg-gradient-to-r ${e.color}`}),e.name]})},e.id))})]}),(0,s.jsx)(d.C5,{})]})}),(0,s.jsx)(d.zB,{control:A.control,name:"dueDate",render:({field:e})=>(0,s.jsxs)(d.eI,{className:"flex flex-col",children:[(0,s.jsx)(d.lR,{className:"text-sm font-medium text-gray-700",children:"Due Date"}),(0,s.jsxs)(u.AM,{children:[(0,s.jsx)(u.Wv,{asChild:!0,children:(0,s.jsx)(d.MJ,{children:(0,s.jsxs)(l.$,{variant:"outline",className:(0,j.cn)("w-full justify-start text-left font-normal backdrop-blur-sm bg-white/80 border-white/20 hover:bg-white/90 focus:border-blue-300 focus:ring-2 focus:ring-blue-200/50 transition-all duration-200",!e.value&&"text-gray-500"),children:[(0,s.jsx)(p.A,{className:"mr-2 h-4 w-4"}),e.value?(0,b.GP)(e.value,"PPP"):(0,s.jsx)("span",{children:"Pick a date"})]})})}),(0,s.jsx)(u.hl,{className:"w-auto p-0 backdrop-blur-sm bg-white/95 border-white/20",align:"start",children:(0,s.jsx)(m.V,{mode:"single",selected:e.value,onSelect:e.onChange,initialFocus:!0})})]}),(0,s.jsx)(d.C5,{})]})})]}),(0,s.jsx)(d.zB,{control:A.control,name:"assignedTo",render:({field:e})=>(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{className:"text-sm font-medium text-gray-700",children:"Assign To"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(k._,{selectedMemberId:e.value,boardMembers:a,onSelect:e.onChange,placeholder:"Assign to member"})}),(0,s.jsx)(d.C5,{})]})}),(0,s.jsx)(d.zB,{control:A.control,name:"remark",render:({field:e})=>(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{className:"text-sm font-medium text-gray-700",children:"Remark / Notes"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.T,{placeholder:"Add any additional notes or comments...",...e,className:"backdrop-blur-sm bg-white/80 border-white/20 focus:border-blue-300 focus:ring-2 focus:ring-blue-200/50 transition-all duration-200 min-h-[80px]",rows:3})}),(0,s.jsx)(d.C5,{})]})}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,s.jsx)(l.$,{type:"button",variant:"outline",onClick:D,className:"backdrop-blur-sm bg-white/50 border-white/20 hover:bg-white/70 transition-all duration-200",children:"Cancel"}),(0,s.jsx)(l.$,{type:"submit",disabled:_,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:_?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})})]})}},37826:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>u,L3:()=>x,c7:()=>m,lG:()=>l,zM:()=>d});var s=a(60687);a(43210);var r=a(26134),n=a(11860),o=a(96241);function l({...e}){return(0,s.jsx)(r.bL,{"data-slot":"dialog",...e})}function d({...e}){return(0,s.jsx)(r.l9,{"data-slot":"dialog-trigger",...e})}function i({...e}){return(0,s.jsx)(r.ZL,{"data-slot":"dialog-portal",...e})}function c({className:e,...t}){return(0,s.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,o.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function u({className:e,children:t,showCloseButton:a=!0,...l}){return(0,s.jsxs)(i,{"data-slot":"dialog-portal",children:[(0,s.jsx)(c,{}),(0,s.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,o.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...l,children:[t,a&&(0,s.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(n.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,o.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function x({className:e,...t}){return(0,s.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,o.cn)("text-lg leading-none font-semibold",e),...t})}},42149:(e,t,a)=>{Promise.resolve().then(a.bind(a,7950))},46840:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Workspace\\\\ProjectManager\\\\project-manager\\\\app\\\\boards\\\\[boardId]\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Workspace\\ProjectManager\\project-manager\\app\\boards\\[boardId]\\layout.tsx","default")},56924:(e,t,a)=>{"use strict";a.d(t,{V:()=>m});var s=a(60687),r=a(43210),n=a(47033),o=a(14952),l=a(78272),d=a(99471),i=a(47315),c=a(96241),u=a(24934);function m({className:e,classNames:t,showOutsideDays:a=!0,captionLayout:r="label",buttonVariant:m="ghost",formatters:g,components:p,...h}){let f=(0,d.a)();return(0,s.jsx)(i.h,{showOutsideDays:a,className:(0,c.cn)("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,e),captionLayout:r,formatters:{formatMonthDropdown:e=>e.toLocaleString("default",{month:"short"}),...g},classNames:{root:(0,c.cn)("w-fit",f.root),months:(0,c.cn)("flex gap-4 flex-col md:flex-row relative",f.months),month:(0,c.cn)("flex flex-col w-full gap-4",f.month),nav:(0,c.cn)("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",f.nav),button_previous:(0,c.cn)((0,u.r)({variant:m}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",f.button_previous),button_next:(0,c.cn)((0,u.r)({variant:m}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",f.button_next),month_caption:(0,c.cn)("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",f.month_caption),dropdowns:(0,c.cn)("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",f.dropdowns),dropdown_root:(0,c.cn)("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",f.dropdown_root),dropdown:(0,c.cn)("absolute inset-0 opacity-0",f.dropdown),caption_label:(0,c.cn)("select-none font-medium","label"===r?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",f.caption_label),table:"w-full border-collapse",weekdays:(0,c.cn)("flex",f.weekdays),weekday:(0,c.cn)("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",f.weekday),week:(0,c.cn)("flex w-full mt-2",f.week),week_number_header:(0,c.cn)("select-none w-(--cell-size)",f.week_number_header),week_number:(0,c.cn)("text-[0.8rem] select-none text-muted-foreground",f.week_number),day:(0,c.cn)("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",f.day),range_start:(0,c.cn)("rounded-l-md bg-accent",f.range_start),range_middle:(0,c.cn)("rounded-none",f.range_middle),range_end:(0,c.cn)("rounded-r-md bg-accent",f.range_end),today:(0,c.cn)("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",f.today),outside:(0,c.cn)("text-muted-foreground aria-selected:text-muted-foreground",f.outside),disabled:(0,c.cn)("text-muted-foreground opacity-50",f.disabled),hidden:(0,c.cn)("invisible",f.hidden),...t},components:{Root:({className:e,rootRef:t,...a})=>(0,s.jsx)("div",{"data-slot":"calendar",ref:t,className:(0,c.cn)(e),...a}),Chevron:({className:e,orientation:t,...a})=>"left"===t?(0,s.jsx)(n.A,{className:(0,c.cn)("size-4",e),...a}):"right"===t?(0,s.jsx)(o.A,{className:(0,c.cn)("size-4",e),...a}):(0,s.jsx)(l.A,{className:(0,c.cn)("size-4",e),...a}),DayButton:x,WeekNumber:({children:e,...t})=>(0,s.jsx)("td",{...t,children:(0,s.jsx)("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:e})}),...p},...h})}function x({className:e,day:t,modifiers:a,...n}){let o=(0,d.a)(),l=r.useRef(null);return r.useEffect(()=>{a.focused&&l.current?.focus()},[a.focused]),(0,s.jsx)(u.$,{ref:l,variant:"ghost",size:"icon","data-day":t.date.toLocaleDateString(),"data-selected-single":a.selected&&!a.range_start&&!a.range_end&&!a.range_middle,"data-range-start":a.range_start,"data-range-end":a.range_end,"data-range-middle":a.range_middle,className:(0,c.cn)("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",o.day,e),...n})}},58164:(e,t,a)=>{"use strict";a.d(t,{C5:()=>f,MJ:()=>h,eI:()=>g,lR:()=>p,lV:()=>i,zB:()=>u});var s=a(60687),r=a(43210),n=a(8730),o=a(27605),l=a(96241),d=a(39390);let i=o.Op,c=r.createContext({}),u=({...e})=>(0,s.jsx)(c.Provider,{value:{name:e.name},children:(0,s.jsx)(o.xI,{...e})}),m=()=>{let e=r.useContext(c),t=r.useContext(x),{getFieldState:a}=(0,o.xW)(),s=(0,o.lN)({name:e.name}),n=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:`${l}-form-item`,formDescriptionId:`${l}-form-item-description`,formMessageId:`${l}-form-item-message`,...n}},x=r.createContext({});function g({className:e,...t}){let a=r.useId();return(0,s.jsx)(x.Provider,{value:{id:a},children:(0,s.jsx)("div",{"data-slot":"form-item",className:(0,l.cn)("grid gap-2",e),...t})})}function p({className:e,...t}){let{error:a,formItemId:r}=m();return(0,s.jsx)(d.J,{"data-slot":"form-label","data-error":!!a,className:(0,l.cn)("data-[error=true]:text-destructive",e),htmlFor:r,...t})}function h({...e}){let{error:t,formItemId:a,formDescriptionId:r,formMessageId:o}=m();return(0,s.jsx)(n.DX,{"data-slot":"form-control",id:a,"aria-describedby":t?`${r} ${o}`:`${r}`,"aria-invalid":!!t,...e})}function f({className:e,...t}){let{error:a,formMessageId:r}=m(),n=a?String(a?.message??""):t.children;return n?(0,s.jsx)("p",{"data-slot":"form-message",id:r,className:(0,l.cn)("text-destructive text-sm",e),...t,children:n}):null}},63974:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>x,gC:()=>m,l6:()=>i,yv:()=>c});var s=a(60687);a(43210);var r=a(75294),n=a(78272),o=a(13964),l=a(3589),d=a(96241);function i({...e}){return(0,s.jsx)(r.bL,{"data-slot":"select",...e})}function c({...e}){return(0,s.jsx)(r.WT,{"data-slot":"select-value",...e})}function u({className:e,size:t="default",children:a,...o}){return(0,s.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":t,className:(0,d.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...o,children:[a,(0,s.jsx)(r.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function m({className:e,children:t,position:a="popper",...n}){return(0,s.jsx)(r.ZL,{children:(0,s.jsxs)(r.UC,{"data-slot":"select-content",className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...n,children:[(0,s.jsx)(g,{}),(0,s.jsx)(r.LM,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,s.jsx)(p,{})]})})}function x({className:e,children:t,...a}){return(0,s.jsxs)(r.q7,{"data-slot":"select-item",className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...a,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(o.A,{className:"size-4"})})}),(0,s.jsx)(r.p4,{children:t})]})}function g({className:e,...t}){return(0,s.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,s.jsx)(l.A,{className:"size-4"})})}function p({className:e,...t}){return(0,s.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,s.jsx)(n.A,{className:"size-4"})})}},79184:(e,t,a)=>{"use strict";a.d(t,{_:()=>m});var s=a(60687),r=a(43210),n=a(58869),o=a(17971),l=a(13964),d=a(33135),i=a(24934),c=a(70373),u=a(96241);function m({selectedMemberId:e,boardMembers:t,onSelect:a,placeholder:m="Assign to member",disabled:x=!1}){let[g,p]=r.useState(!1),h=t.find(t=>t.uid===e),f=e=>e.displayName||e.email||"Unknown User",b=e=>{let t=e.displayName||e.email||"U";return t[0]?.toUpperCase()||"U"};return(0,s.jsxs)(d.AM,{open:g,onOpenChange:p,children:[(0,s.jsx)(d.Wv,{asChild:!0,children:(0,s.jsxs)(i.$,{variant:"outline",role:"combobox","aria-expanded":g,className:"w-full justify-between backdrop-blur-sm bg-white/80 border-white/20 hover:bg-white/90 hover:border-gray-300 focus:border-blue-300 focus:ring-2 focus:ring-blue-200/50 transition-all duration-200",disabled:x,onClick:()=>p(!g),children:[h?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(c.eu,{className:"h-5 w-5",children:[(0,s.jsx)(c.BK,{src:h.photoURL??void 0}),(0,s.jsx)(c.q5,{children:b(h)})]}),(0,s.jsx)("span",{className:"truncate",children:f(h)})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,s.jsx)(n.A,{className:"h-4 w-4"}),m]}),(0,s.jsx)(o.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,s.jsx)(d.hl,{className:"w-[300px] p-0 backdrop-blur-sm bg-white/95 border-white/20 z-50",children:(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)("input",{type:"text",placeholder:"Search members...",className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:()=>{}})}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center px-3 py-2 text-sm cursor-pointer hover:bg-gray-100 rounded-md transition-colors",onClick:()=>{a(void 0),p(!1)},children:[(0,s.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"Unassigned"]}),t.map(t=>(0,s.jsxs)("div",{className:"flex items-center px-3 py-2 text-sm cursor-pointer hover:bg-gray-100 rounded-md transition-colors",onClick:()=>{a(t.uid),p(!1)},children:[(0,s.jsx)(l.A,{className:(0,u.cn)("mr-2 h-4 w-4",e===t.uid?"opacity-100":"opacity-0")}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(c.eu,{className:"h-5 w-5",children:[(0,s.jsx)(c.BK,{src:t.photoURL??void 0}),(0,s.jsx)(c.q5,{children:b(t)})]}),(0,s.jsx)("span",{className:"truncate",children:f(t)})]})]},t.uid))]})]})})]})}},82400:(e,t,a)=>{"use strict";a.d(t,{Q:()=>j});var s=a(60687),r=a(27605),n=a(63442),o=a(63974),l=a(75535),d=a(80043),i=a(9275),c=a(24934),u=a(68988),m=a(15616),x=a(39390),g=a(79184),p=a(85650),h=a(52581);let{db:f}=(0,d.M)(),b=i.Ik({title:i.Yj().min(1,"Title is required"),status:i.Yj(),assignedTo:i.Yj().optional(),dueDate:i.Yj().optional(),remark:i.Yj().optional()}),j=({boardId:e,taskId:t,subtask:a,boardMembers:d,boardStatuses:i,onSubtaskUpdated:j,onClose:v})=>{let{register:w,handleSubmit:y,control:N,formState:{errors:k,isSubmitting:z}}=(0,r.mN)({resolver:(0,n.u)(b),defaultValues:{title:a.title,status:a.status,assignedTo:a.assignedTo||"",dueDate:a.dueDate?(0,p.GP)(a.dueDate.toDate(),"yyyy-MM-dd"):"",remark:a.remark||""}}),C=async s=>{try{let r={title:s.title,status:s.status};if(s.assignedTo&&(r.assignedTo=s.assignedTo),s.dueDate){let e=new Date(s.dueDate);r.dueDate=l.Dc.fromDate(e)}s.remark&&(r.remark=s.remark);let n=(0,l.H9)(f,"boards",e,"tasks",t,"subtasks",a.id);await (0,l.mZ)(n,r),j(),v()}catch(e){console.error("Error updating subtask: ",e),h.oR.error("Failed to update subtask.")}};return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/50 to-purple-50/50 rounded-xl -z-10"}),(0,s.jsxs)("form",{onSubmit:y(C),className:"space-y-6 p-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.J,{htmlFor:"title",className:"text-sm font-medium text-gray-700",children:"Subtask Title *"}),(0,s.jsx)(u.p,{id:"title",...w("title"),placeholder:"Enter subtask title","aria-invalid":k.title?"true":"false",className:"backdrop-blur-sm bg-white/80 border-white/20 focus:border-blue-300 focus:ring-2 focus:ring-blue-200/50 transition-all duration-200"}),k.title&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:k.title.message})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.J,{htmlFor:"status",className:"text-sm font-medium text-gray-700",children:"Status"}),(0,s.jsx)(r.xI,{name:"status",control:N,render:({field:e})=>(0,s.jsxs)(o.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,s.jsx)(o.bq,{className:"backdrop-blur-sm bg-white/80 border-white/20 focus:border-blue-300 focus:ring-2 focus:ring-blue-200/50 transition-all duration-200",children:(0,s.jsx)(o.yv,{placeholder:"Select a status"})}),(0,s.jsx)(o.gC,{className:"backdrop-blur-sm bg-white/95 border-white/20",children:i.map(e=>(0,s.jsx)(o.eb,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:`w-2 h-2 rounded-full bg-gradient-to-r ${e.color}`}),e.name]})},e.id))})]})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.J,{htmlFor:"dueDate",className:"text-sm font-medium text-gray-700",children:"Due Date"}),(0,s.jsx)(u.p,{id:"dueDate",type:"date",...w("dueDate"),min:(0,p.GP)(new Date,"yyyy-MM-dd"),className:"backdrop-blur-sm bg-white/80 border-white/20 focus:border-blue-300 focus:ring-2 focus:ring-blue-200/50 transition-all duration-200"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.J,{htmlFor:"assignedTo",className:"text-sm font-medium text-gray-700",children:"Assigned To"}),(0,s.jsx)(r.xI,{name:"assignedTo",control:N,render:({field:e})=>(0,s.jsx)(g._,{selectedMemberId:e.value,boardMembers:d,onSelect:e.onChange,placeholder:"Assign subtask to member"})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.J,{htmlFor:"remark",className:"text-sm font-medium text-gray-700",children:"Remark / Notes"}),(0,s.jsx)(m.T,{id:"remark",...w("remark"),placeholder:"Add any additional notes or comments...",rows:3,className:"backdrop-blur-sm bg-white/80 border-white/20 focus:border-blue-300 focus:ring-2 focus:ring-blue-200/50 transition-all duration-200 min-h-[80px] resize-none"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,s.jsx)(c.$,{type:"button",variant:"outline",onClick:v,className:"backdrop-blur-sm bg-white/50 border-white/20 hover:bg-white/70 transition-all duration-200",children:"Cancel"}),(0,s.jsx)(c.$,{type:"submit",disabled:z,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:z?"Updating...":"Update Subtask"})]})]})]})}},90687:(e,t,a)=>{"use strict";a.d(t,{H:()=>m,t:()=>x});var s=a(60687),r=a(43210),n=a(75535),o=a(80043),l=a(63772),d=a(16189),i=a(52581);let{db:c}=(0,o.M)(),u=(0,r.createContext)(void 0),m=({children:e})=>{let{user:t}=(0,l.A)(),a=(0,d.useParams)().boardId,[o,m]=(0,r.useState)(null),[x,g]=(0,r.useState)([]),[p,h]=(0,r.useState)({}),[f,b]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(!t||!a)return void b(!1);b(!0);let e=[],s=(0,n.aQ)((0,n.H9)(c,"boards",a),e=>{e.exists()?m({id:e.id,...e.data()}):(m(null),i.oR.error("Board not found.")),b(!1)},e=>{console.error("Firestore board listener error:",e),i.oR.error("Failed to load board.",{description:"You may not have permission to view this board."}),m(null),b(!1)});e.push(s);let r=(0,n.P)((0,n.rJ)(c,"boards",a,"tasks")),o=(0,n.aQ)(r,e=>{g(e.docs.map(e=>({id:e.id,...e.data()})))},e=>{console.error("Firestore tasks listener error:",e),i.oR.error("Failed to load tasks for this board."),g([])});return e.push(o),()=>e.forEach(e=>e())},[t,a]),(0,r.useEffect)(()=>{if(0===x.length)return;let e=[];return h({}),x.forEach(t=>{let s=(0,n.P)((0,n.rJ)(c,"boards",a,"tasks",t.id,"subtasks")),r=(0,n.aQ)(s,e=>{let a=e.docs.map(e=>({id:e.id,...e.data()}));h(e=>({...e,[t.id]:a}))},e=>{console.error(`Firestore subtasks listener error for task ${t.id}:`,e),i.oR.error(`Failed to load subtasks for task: ${t.title}`)});e.push(r)}),()=>e.forEach(e=>e())},[x,a]),(0,s.jsx)(u.Provider,{value:{board:o,tasks:x,subtasks:p,loading:f},children:e})},x=()=>{let e=(0,r.useContext)(u);if(void 0===e)throw Error("useRealtimeData must be used within a RealtimeDataProvider");return e}},95033:(e,t,a)=>{"use strict";a.d(t,{$v:()=>g,EO:()=>c,Lt:()=>l,Rx:()=>p,Zr:()=>h,ck:()=>m,r7:()=>x,wd:()=>u});var s=a(60687);a(43210);var r=a(97895),n=a(96241),o=a(24934);function l({...e}){return(0,s.jsx)(r.bL,{"data-slot":"alert-dialog",...e})}function d({...e}){return(0,s.jsx)(r.ZL,{"data-slot":"alert-dialog-portal",...e})}function i({className:e,...t}){return(0,s.jsx)(r.hJ,{"data-slot":"alert-dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function c({className:e,...t}){return(0,s.jsxs)(d,{children:[(0,s.jsx)(i,{}),(0,s.jsx)(r.UC,{"data-slot":"alert-dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function u({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function m({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function x({className:e,...t}){return(0,s.jsx)(r.hE,{"data-slot":"alert-dialog-title",className:(0,n.cn)("text-lg font-semibold",e),...t})}function g({className:e,...t}){return(0,s.jsx)(r.VY,{"data-slot":"alert-dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",e),...t})}function p({className:e,...t}){return(0,s.jsx)(r.rc,{className:(0,n.cn)((0,o.r)(),e),...t})}function h({className:e,...t}){return(0,s.jsx)(r.ZD,{className:(0,n.cn)((0,o.r)({variant:"outline"}),e),...t})}}};