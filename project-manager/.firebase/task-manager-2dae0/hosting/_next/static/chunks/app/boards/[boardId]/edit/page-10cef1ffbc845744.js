(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[469],{2714:(e,t,a)=>{"use strict";a.d(t,{J:()=>i});var s=a(5155);a(2115);var r=a(968),l=a(3999);function i(e){let{className:t,...a}=e;return(0,s.jsx)(r.b,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},6368:(e,t,a)=>{Promise.resolve().then(a.bind(a,9933))},8482:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>n,Zp:()=>l,aR:()=>i});var s=a(5155);a(2115);var r=a(3999);function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...a})}},9474:(e,t,a)=>{"use strict";a.d(t,{T:()=>l});var s=a(5155);a(2115);var r=a(3999);function l(e){let{className:t,...a}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}},9840:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>m,L3:()=>x,c7:()=>u,lG:()=>n,zM:()=>o});var s=a(5155);a(2115);var r=a(5452),l=a(4416),i=a(3999);function n(e){let{...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"dialog",...t})}function o(e){let{...t}=e;return(0,s.jsx)(r.l9,{"data-slot":"dialog-trigger",...t})}function d(e){let{...t}=e;return(0,s.jsx)(r.ZL,{"data-slot":"dialog-portal",...t})}function c(e){let{className:t,...a}=e;return(0,s.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function m(e){let{className:t,children:a,showCloseButton:n=!0,...o}=e;return(0,s.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,s.jsx)(c,{}),(0,s.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...o,children:[a,n&&(0,s.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(l.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function x(e){let{className:t,...a}=e;return(0,s.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",t),...a})}},9852:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var s=a(5155);a(2115);var r=a(3999);function l(e){let{className:t,type:a,...l}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...l})}},9933:(e,t,a)=>{"use strict";a.d(t,{default:()=>z});var s=a(5155),r=a(2115),l=a(5695),i=a(5317),n=a(8915),o=a(8794),d=a(7168),c=a(9852),m=a(9474),u=a(8482),x=a(4378),g=a(4156),h=a(7550),b=a(381),p=a(3311),f=a(3127),j=a(4616),v=a(3717),N=a(4126),y=a(4229),w=a(6874),k=a.n(w),C=a(2714),S=a(9840);let{db:A}=(0,n.M)(),z=()=>{let e=(0,l.useParams)(),t=(0,l.useRouter)(),{boardId:a}=e,{user:n}=(0,o.A)(),[w,z]=(0,r.useState)(null),[B,D]=(0,r.useState)(""),[E,$]=(0,r.useState)(""),[_,J]=(0,r.useState)(!0),[F,Z]=(0,r.useState)(null),[O,T]=(0,r.useState)(!1),[L,P]=(0,r.useState)([]),[U,M]=(0,r.useState)(null),[G,R]=(0,r.useState)(""),[q,H]=(0,r.useState)("from-gray-500 to-gray-600"),[I,W]=(0,r.useState)(""),[Y,K]=(0,r.useState)("from-gray-500 to-gray-600"),[Q,V]=(0,r.useState)(!1),[X,ee]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(a)try{let e=(0,i.H9)(A,"boards",a),t=await (0,i.x7)(e);if(t.exists()){let e={id:t.id,...t.data()};z(e),D(e.name),$(e.description||""),P(e.customStatuses||[])}else Z("Board not found.")}catch(e){Z("Failed to fetch board data."),console.error(e)}J(!1)})()},[a]);let et=async e=>{if(e.preventDefault(),!n||w&&n.uid!==w.owner)return void Z("You do not have permission to edit this board.");T(!0),Z(null);try{let e=(0,i.H9)(A,"boards",a);await (0,i.mZ)(e,{name:B,description:E,customStatuses:L.length>0?L:null}),t.push("/boards/".concat(a))}catch(e){Z("Failed to update board. Please try again."),console.error(e)}finally{T(!1)}},ea=e=>{M(e),W(e.name),K(e.color),ee(e.id)},es=()=>{U&&I.trim()&&(P(L.map(e=>e.id===U.id?{...e,name:I.trim(),color:Y}:e)),M(null),W(""),K("from-gray-500 to-gray-600"),ee(null))},er=e=>{P(L.filter(t=>t.id!==e))},el=()=>{M(null),W(""),K("from-gray-500 to-gray-600"),ee(null)},ei=["from-gray-500 to-gray-600","from-red-500 to-red-600","from-orange-500 to-orange-600","from-yellow-500 to-yellow-600","from-green-500 to-green-600","from-teal-500 to-teal-600","from-blue-500 to-blue-600","from-indigo-500 to-indigo-600","from-purple-500 to-purple-600","from-pink-500 to-pink-600"];return(0,s.jsx)(g.q,{children:_?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):F&&!w?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:(0,s.jsxs)(u.Zp,{className:"backdrop-blur-sm bg-white/70 border-0 shadow-lg p-8 text-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:F}),(0,s.jsx)(d.$,{asChild:!0,children:(0,s.jsx)(k(),{href:"/dashboard",children:"Back to Dashboard"})})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-purple-600/10 rounded-full blur-3xl"}),(0,s.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-indigo-400/10 to-pink-600/10 rounded-full blur-3xl"}),(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 w-96 h-96 bg-gradient-to-br from-cyan-400/5 to-blue-600/5 rounded-full blur-3xl transform -translate-x-1/2 -translate-y-1/2"})]}),(0,s.jsx)(x.Y,{}),(0,s.jsxs)("div",{className:"relative container mx-auto px-4 py-8",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(d.$,{asChild:!0,variant:"ghost",className:"mb-6 text-gray-600 hover:text-gray-900 hover:bg-white/50",children:(0,s.jsxs)(k(),{href:"/boards/".concat(a),className:"flex items-center gap-2",children:[(0,s.jsx)(h.A,{className:"w-4 h-4"}),"Back to ",(null==w?void 0:w.name)||"Board"]})})}),(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:(0,s.jsx)(b.A,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent mb-2",children:"Edit Board"}),(0,s.jsx)("p",{className:"text-gray-600 text-lg",children:"Update your board details and settings"})]}),(0,s.jsxs)(u.Zp,{className:"backdrop-blur-sm bg-white/70 border-0 shadow-xl overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/40 to-white/10"}),(0,s.jsx)(u.aR,{className:"relative text-center pb-6",children:(0,s.jsxs)(u.ZB,{className:"text-xl font-semibold text-gray-900 flex items-center justify-center gap-2",children:[(0,s.jsx)(p.A,{className:"w-5 h-5 text-blue-600"}),"Board Settings"]})}),(0,s.jsx)(u.Wu,{className:"relative p-8 pt-0",children:(0,s.jsxs)("form",{onSubmit:et,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(C.J,{htmlFor:"name",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,s.jsx)(b.A,{className:"w-4 h-4"}),"Board Name"]}),(0,s.jsx)(c.p,{id:"name",value:B,onChange:e=>D(e.target.value),placeholder:"Enter your board name...",required:!0,className:"h-12 backdrop-blur-sm bg-white/50 border-white/20 focus:bg-white/70 transition-all duration-200",disabled:O})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(C.J,{htmlFor:"description",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,s.jsx)(p.A,{className:"w-4 h-4"}),"Description (Optional)"]}),(0,s.jsx)(m.T,{id:"description",value:E,onChange:e=>$(e.target.value),placeholder:"Describe your board and its purpose...",rows:4,className:"backdrop-blur-sm bg-white/50 border-white/20 focus:bg-white/70 transition-all duration-200 resize-none",disabled:O})]}),(0,s.jsxs)("div",{className:"space-y-4 pt-6 border-t border-gray-200/60",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(C.J,{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,s.jsx)(f.A,{className:"w-4 h-4"}),"Custom Status Options"]}),(0,s.jsxs)(S.lG,{open:Q,onOpenChange:V,children:[(0,s.jsx)(S.zM,{asChild:!0,children:(0,s.jsxs)(d.$,{type:"button",variant:"outline",size:"sm",className:"backdrop-blur-sm bg-white/50 border-white/20 hover:bg-white/70",children:[(0,s.jsx)(j.A,{className:"w-3 h-3 mr-1"}),"Add Status"]})}),(0,s.jsxs)(S.Cf,{className:"backdrop-blur-sm bg-white/95",children:[(0,s.jsx)(S.c7,{children:(0,s.jsx)(S.L3,{children:"Add New Status"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"statusName",children:"Status Name"}),(0,s.jsx)(c.p,{id:"statusName",value:G,onChange:e=>R(e.target.value),placeholder:"Enter status name..."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{children:"Color"}),(0,s.jsx)("div",{className:"grid grid-cols-5 gap-2",children:ei.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>H(e),className:"w-10 h-10 bg-gradient-to-br ".concat(e," rounded-lg border-2 transition-all ").concat(q===e?"border-gray-900 scale-110":"border-gray-200 hover:scale-105")},e))})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(d.$,{type:"button",variant:"ghost",onClick:()=>{R(""),H("from-gray-500 to-gray-600"),V(!1)},children:"Cancel"}),(0,s.jsx)(d.$,{type:"button",onClick:()=>{if(!G.trim())return;let e={id:"custom-".concat(Date.now()),name:G.trim(),color:q,order:L.length};P([...L,e]),R(""),H("from-gray-500 to-gray-600"),V(!1)},disabled:!G.trim(),children:"Add Status"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[0===L.length&&(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-600",children:"Default Statuses"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[{id:"todo",name:"To Do",color:"from-yellow-500 to-orange-600"},{id:"in-progress",name:"In Progress",color:"from-blue-500 to-cyan-600"},{id:"done",name:"Done",color:"from-green-500 to-emerald-600"}].map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/40 border border-gray-200/40",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br ".concat(e.color," rounded-lg")}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"Default"})]},e.id))})]}),L.length>0?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-600",children:"Custom Statuses"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:L.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/60 border border-gray-200/60",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br ".concat(e.color," rounded-lg")}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.name})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsxs)(S.lG,{open:X===e.id,onOpenChange:t=>ee(t?e.id:null),children:[(0,s.jsx)(S.zM,{asChild:!0,children:(0,s.jsx)(d.$,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>ea(e),children:(0,s.jsx)(v.A,{className:"h-3 w-3"})})}),(0,s.jsxs)(S.Cf,{className:"backdrop-blur-sm bg-white/95",children:[(0,s.jsx)(S.c7,{children:(0,s.jsx)(S.L3,{children:"Edit Status"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"editStatusName",children:"Status Name"}),(0,s.jsx)(c.p,{id:"editStatusName",value:I,onChange:e=>W(e.target.value),placeholder:"Enter status name"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{children:"Color"}),(0,s.jsx)("div",{className:"grid grid-cols-5 gap-2",children:ei.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>K(e),className:"w-10 h-10 bg-gradient-to-br ".concat(e," rounded-lg border-2 transition-all ").concat(Y===e?"border-gray-900 scale-110":"border-gray-200 hover:scale-105")},e))})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(d.$,{type:"button",variant:"ghost",onClick:el,children:"Cancel"}),(0,s.jsx)(d.$,{type:"button",onClick:es,disabled:!I.trim(),children:"Update Status"})]})]})]})]}),(0,s.jsx)(d.$,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 text-red-500 hover:text-red-700",onClick:()=>er(e.id),children:(0,s.jsx)(N.A,{className:"h-3 w-3"})})]})]},e.id))})]}):(0,s.jsxs)("div",{className:"text-center py-4 text-gray-500 bg-gray-50/50 rounded-lg border border-dashed border-gray-300",children:[(0,s.jsx)(j.A,{className:"w-6 h-6 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{className:"text-sm",children:"No custom statuses yet"}),(0,s.jsx)("p",{className:"text-xs",children:"Click Add Status to create custom workflow states"})]})]}),(0,s.jsx)("div",{className:"p-3 rounded-lg bg-blue-50/60 border border-blue-200/60",children:(0,s.jsxs)("p",{className:"text-xs text-blue-700",children:[(0,s.jsx)("strong",{children:"Note:"})," The default statuses To Do, In Progress, and Done will always be available alongside your custom statuses."]})})]}),F&&(0,s.jsx)("div",{className:"p-4 rounded-lg bg-red-50 border border-red-200",children:(0,s.jsx)("p",{className:"text-red-600 text-sm",children:F})}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)(d.$,{type:"submit",disabled:O||!B.trim(),className:"flex-1 h-12 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50",children:O?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Updating..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.A,{className:"w-4 h-4 mr-2"}),"Update Board"]})}),(0,s.jsx)(d.$,{type:"button",variant:"outline",asChild:!0,className:"backdrop-blur-sm bg-white/50 border-white/20 hover:bg-white/70 transition-all duration-200",disabled:O,children:(0,s.jsx)(k(),{href:"/boards/".concat(a),children:"Cancel"})})]})]})})]}),(0,s.jsx)("div",{className:"text-center mt-8",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Changes will be visible to all board members immediately."})})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,965,496,395,778,529,563,441,684,358],()=>t(6368)),_N_E=e.O()}]);